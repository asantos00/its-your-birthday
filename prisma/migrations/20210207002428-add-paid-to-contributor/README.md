# Migration `20210207002428-add-paid-to-contributor`

This migration has been generated by Alexandre Santos at 2/7/2021, 12:24:28 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."_paidBy" DROP CONSTRAINT IF EXiSTS "_paidBy_A_fkey",
DROP CONSTRAINT IF EXiSTS "_paidBy_B_fkey",
ALTER COLUMN "B" SET DATA TYPE text ;

ALTER TABLE "public"."_paidBy" ADD FOREIGN KEY ("A")REFERENCES "public"."Birthday"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_paidBy" ADD FOREIGN KEY ("B")REFERENCES "public"."Contributor"("email") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210207000125-remove-junk-paid-duplicate..20210207002428-add-paid-to-contributor
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -17,9 +17,9 @@
   Birthday      Birthday[] @relation
   suggestedGifs Gift[]     @relation("giftSuggestor")
   upvotes       Gift[]     @relation("upvotedBy")
   createdAt     DateTime   @default(now())
-  paid          Gift[]     @relation("paidBy")
+  paid          Birthday[] @relation("paidBy")
 }
 model Gift {
   id          Int           @id @default(autoincrement())
@@ -29,9 +29,8 @@
   description String
   suggestor   Contributor?  @relation(name: "giftSuggestor", fields: [authorEmail], references: [email])
   authorEmail String?
   upvotedBy   Contributor[] @relation("upvotedBy")
-  paidBy      Contributor[] @relation("paidBy")
 }
 model Birthday {
   id           String        @id @default(uuid())
@@ -39,5 +38,6 @@
   date         DateTime?
   person       String
   gifts        Gift[]
   contributors Contributor[] @relation
+  paidBy       Contributor[] @relation("paidBy")
 }
```


